import React, { useState, useEffect } from 'react';
import { 
  ChevronRight, 
  ChevronLeft, 
  Target, 
  TrendingDown, 
  Store, 
  MapPin, 
  CheckCircle, 
  XCircle,
  AlertTriangle,
  ArrowRight,
  PieChart,
  Users,
  Briefcase
} from 'lucide-react';

const PresentationApp = () => {
  const [currentSlide, setCurrentSlide] = useState(0);
  const [animating, setAnimating] = useState(false);

  const totalSlides = 7;

  const nextSlide = () => {
    if (currentSlide < totalSlides - 1) {
      setAnimating(true);
      setTimeout(() => {
        setCurrentSlide(prev => prev + 1);
        setAnimating(false);
      }, 300);
    }
  };

  const prevSlide = () => {
    if (currentSlide > 0) {
      setAnimating(true);
      setTimeout(() => {
        setCurrentSlide(prev => prev - 1);
        setAnimating(false);
      }, 300);
    }
  };

  // Keyboard navigation
  useEffect(() => {
    const handleKeyDown = (e) => {
      if (e.key === 'ArrowRight') nextSlide();
      if (e.key === 'ArrowLeft') prevSlide();
    };
    window.addEventListener('keydown', handleKeyDown);
    return () => window.removeEventListener('keydown', handleKeyDown);
  }, [currentSlide]);

  const slides = [
    <TitleSlide />,
    <AnalysisSlide />,
    <PositioningSlide />,
    <StrategySlide />,
    <PilotSlide />,
    <ScenarioSlide />,
    <ConclusionSlide />
  ];

  return (
    <div className="min-h-screen bg-stone-50 text-stone-800 font-sans selection:bg-emerald-200">
      {/* Header / Progress Bar */}
      <div className="fixed top-0 left-0 w-full h-1.5 bg-stone-200 z-50">
        <div 
          className="h-full bg-emerald-600 transition-all duration-500 ease-out"
          style={{ width: `${((currentSlide + 1) / totalSlides) * 100}%` }}
        />
      </div>

      {/* Slide Counter (Top Right) */}
      <div className="fixed top-4 right-4 z-40 text-stone-400 text-sm font-medium">
        Slide {currentSlide + 1} / {totalSlides}
      </div>

      {/* Main Content Area */}
      <main className="flex flex-col items-center justify-center min-h-screen p-4 md:p-8 overflow-hidden">
        <div 
          className={`w-full max-w-5xl transition-opacity duration-300 transform ${animating ? 'opacity-0 translate-y-4' : 'opacity-100 translate-y-0'}`}
        >
          {slides[currentSlide]}
        </div>
      </main>

      {/* Navigation Controls */}
      <div className="fixed bottom-8 left-0 w-full flex justify-center gap-4 z-50 pointer-events-none">
        <div className="bg-white/90 backdrop-blur shadow-lg rounded-full p-2 flex gap-4 pointer-events-auto border border-stone-200">
          <button 
            onClick={prevSlide}
            disabled={currentSlide === 0}
            className={`p-3 rounded-full transition-colors ${currentSlide === 0 ? 'text-stone-300' : 'text-emerald-700 hover:bg-emerald-50'}`}
          >
            <ChevronLeft size={24} />
          </button>
          <button 
            onClick={nextSlide}
            disabled={currentSlide === totalSlides - 1}
            className={`p-3 rounded-full transition-colors ${currentSlide === totalSlides - 1 ? 'text-stone-300' : 'text-emerald-700 hover:bg-emerald-50'}`}
          >
            <ChevronRight size={24} />
          </button>
        </div>
      </div>

      {/* Footer Credit */}
      <div className="fixed bottom-4 left-4 z-40 text-stone-400 text-xs font-medium">
        Projektdesign: Dr. Christian Kovac
      </div>
    </div>
  );
};

// --- Slide Components ---

const TitleSlide = () => (
  <div className="text-center space-y-8">
    <div className="inline-block px-4 py-1 bg-emerald-100 text-emerald-800 rounded-full text-sm font-semibold tracking-wide uppercase mb-4">
      Gesprächskonzept für intern
    </div>
    <h1 className="text-5xl md:text-7xl font-bold text-emerald-900 tracking-tight leading-tight">
      Weleda Prestige <br />
      <span className="text-emerald-600/80 font-serif italic">Neue Vertriebswege</span>
    </h1>
    <p className="text-xl text-stone-500 max-w-2xl mx-auto mt-6">
      Strategievorschlag für die Geschäftsführung Weleda Österreich
    </p>
    
    <div className="mt-12 p-6 bg-white rounded-xl shadow-sm border border-stone-100 max-w-md mx-auto flex items-center gap-4 text-left">
      <div className="bg-stone-100 p-3 rounded-full">
        <Users className="text-stone-600" />
      </div>
      <div>
        <div className="font-bold text-stone-800">Barbara Bock</div>
        <div className="text-sm text-stone-500">Retail Managerin Weleda Prestige AT</div>
        <div className="text-xs text-emerald-600 mt-1">20 Jahre Marktexpertise</div>
      </div>
    </div>
  </div>
);

const AnalysisSlide = () => {
  const [activeCard, setActiveCard] = useState(null);

  const challenges = [
    { title: "Counter-Personal", icon: <Users />, desc: "L'Oréal & Co. haben eigenes Personal in A-Filialen. Diese greifen nicht zu Weleda." },
    { title: "Filialleiter-Abhängigkeit", icon: <Store />, desc: "Engagement ist reines Glücksspiel. Viele sind nicht motiviert." },
    { title: "Stadt-Land-Gefälle", icon: <MapPin />, desc: "In kleineren Filialen fehlen oft Interesse und Kompetenz für Premium." },
    { title: "Schulungsbereitschaft", icon: <Briefcase />, desc: "Personal kennt Prestige zu wenig, um es aktiv zu empfehlen." }
  ];

  return (
    <div className="space-y-8">
      <div className="space-y-2">
        <h2 className="text-3xl font-bold text-emerald-900">Ehrliche Analyse: Status Quo Müller</h2>
        <p className="text-lg text-stone-600">Strukturelle Herausforderungen bremsen das Wachstum.</p>
      </div>

      <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
        {challenges.map((c, idx) => (
          <div 
            key={idx}
            className={`p-6 rounded-xl border transition-all cursor-pointer hover:shadow-md ${activeCard === idx ? 'bg-emerald-50 border-emerald-500 ring-1 ring-emerald-500' : 'bg-white border-stone-200'}`}
            onClick={() => setActiveCard(idx)}
          >
            <div className="flex items-center gap-3 mb-3">
              <div className={`p-2 rounded-lg ${activeCard === idx ? 'bg-emerald-200 text-emerald-800' : 'bg-stone-100 text-stone-600'}`}>
                {c.icon}
              </div>
              <h3 className="font-bold text-lg text-stone-800">{c.title}</h3>
            </div>
            <p className="text-stone-600">{c.desc}</p>
          </div>
        ))}
      </div>
      <div className="text-center text-sm text-stone-400 italic">
        Klicken Sie auf die Karten für Details
      </div>
    </div>
  );
};

const PositioningSlide = () => (
  <div className="space-y-8">
    <div className="text-center mb-8">
      <h2 className="text-3xl font-bold text-emerald-900">Das Positionierungs-Dilemma</h2>
      <p className="text-xl text-stone-600 mt-2">Prestige fällt aktuell „zwischen zwei Stühle“</p>
    </div>

    <div className="flex flex-col md:flex-row gap-8 items-stretch justify-center">
      {/* Naturkosmetik */}
      <div className="flex-1 bg-white p-6 rounded-2xl shadow-sm border border-stone-200 opacity-60 grayscale hover:grayscale-0 hover:opacity-100 transition-all duration-500">
        <div className="text-center mb-6">
          <h3 className="text-xl font-bold text-stone-800">Naturkosmetik-Abteilung</h3>
          <p className="text-sm text-stone-500">Wo Weleda hingehört</p>
        </div>
        <div className="space-y-4">
          <div className="flex items-center gap-3">
            <CheckCircle className="text-emerald-500 shrink-0" />
            <span className="text-sm">Marke ist bekannt</span>
          </div>
          <div className="flex items-center gap-3">
            <XCircle className="text-red-400 shrink-0" />
            <span className="text-sm font-semibold">Keine Provision</span>
          </div>
          <div className="flex items-center gap-3">
            <XCircle className="text-red-400 shrink-0" />
            <span className="text-sm">Kein Verkaufsanreiz</span>
          </div>
        </div>
      </div>

      {/* Parfümerie */}
      <div className="flex-1 bg-white p-6 rounded-2xl shadow-lg border-2 border-emerald-100 relative overflow-hidden">
        <div className="absolute top-0 right-0 bg-red-100 text-red-600 text-xs font-bold px-3 py-1 rounded-bl-lg">
          IST-Zustand
        </div>
        <div className="text-center mb-6">
          <h3 className="text-xl font-bold text-emerald-900">Parfümerie-Abteilung</h3>
          <p className="text-sm text-stone-500">Wo Prestige aktuell liegt</p>
        </div>
        <div className="space-y-4">
          <div className="flex items-center gap-3">
            <CheckCircle className="text-emerald-500 shrink-0" />
            <span className="text-sm font-semibold">Provision vorhanden</span>
          </div>
          <div className="flex items-center gap-3">
            <XCircle className="text-red-400 shrink-0" />
            <span className="text-sm">Personal kennt Weleda kaum</span>
          </div>
          <div className="flex items-center gap-3">
            <AlertTriangle className="text-amber-500 shrink-0" />
            <span className="text-sm">Wird kaum verkauft</span>
          </div>
        </div>
      </div>
    </div>

    <div className="bg-amber-50 border-l-4 border-amber-400 p-4 rounded-r-lg max-w-3xl mx-auto mt-6">
      <p className="font-medium text-amber-900">
        <span className="font-bold">Fazit:</span> Die Müller-Listung blockiert nicht nur den Verkauf dort, sondern schreckt auch potenzielle Premium-Partner (Inhabergeführte) ab.
      </p>
    </div>
  </div>
);

const StrategySlide = () => (
  <div className="h-full flex flex-col">
    <h2 className="text-3xl font-bold text-emerald-900 mb-2">Die Kernbotschaft</h2>
    <p className="text-lg text-stone-600 mb-8 max-w-3xl">
      "Wir brauchen Partner, die Prestige <strong>wollen</strong> – nicht solche, wo wir kämpfen müssen."
    </p>

    <div className="grid grid-cols-1 md:grid-cols-2 gap-6 flex-grow">
      {/* Route A */}
      <div className="group bg-gradient-to-br from-white to-stone-50 p-6 rounded-2xl border border-stone-200 hover:border-emerald-300 transition-all hover:shadow-lg">
        <div className="w-12 h-12 bg-emerald-100 rounded-full flex items-center justify-center mb-4 text-emerald-700 font-bold text-xl">A</div>
        <h3 className="text-2xl font-bold text-emerald-900 mb-2">Bestehende Kanäle</h3>
        <div className="h-1 w-20 bg-emerald-500 mb-4"></div>
        <ul className="space-y-3">
          <li className="flex items-start gap-2">
            <CheckCircle size={18} className="text-emerald-600 mt-1 shrink-0" />
            <span><strong>Top-Apotheken</strong> mit Beratungskompetenz</span>
          </li>
          <li className="flex items-start gap-2">
            <CheckCircle size={18} className="text-emerald-600 mt-1 shrink-0" />
            <span>Selektion: 20-30 Partner</span>
          </li>
          <li className="flex items-start gap-2">
            <CheckCircle size={18} className="text-emerald-600 mt-1 shrink-0" />
            <span>Vorteil: Kontakt besteht, Marke bekannt</span>
          </li>
        </ul>
      </div>

      {/* Route B */}
      <div className="group bg-gradient-to-br from-emerald-900 to-emerald-800 p-6 rounded-2xl text-white shadow-xl transform md:-translate-y-2">
        <div className="w-12 h-12 bg-white/20 rounded-full flex items-center justify-center mb-4 text-white font-bold text-xl">B</div>
        <h3 className="text-2xl font-bold mb-2">Neue Exklusiv-Partner</h3>
        <div className="h-1 w-20 bg-white/50 mb-4"></div>
        <ul className="space-y-3 text-emerald-100">
          <li className="flex items-start gap-2">
            <CheckCircle size={18} className="text-emerald-300 mt-1 shrink-0" />
            <span><strong>Inhabergeführte Parfümerien</strong></span>
          </li>
          <li className="flex items-start gap-2">
            <CheckCircle size={18} className="text-emerald-300 mt-1 shrink-0" />
            <span>Zielgruppe: 40+, kaufkräftig</span>
          </li>
          <li className="flex items-start gap-2">
            <CheckCircle size={18} className="text-emerald-300 mt-1 shrink-0" />
            <span>Kein Wettbewerb mit Industrie-Countern</span>
          </li>
        </ul>
      </div>
    </div>
  </div>
);

const PilotSlide = () => (
  <div className="space-y-8 w-full max-w-4xl">
    <h2 className="text-3xl font-bold text-emerald-900">Konkreter Pilotvorschlag</h2>
    
    <div className="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
      <div className="bg-white p-5 rounded-xl shadow-sm border border-stone-100 text-center">
        <div className="text-4xl font-bold text-emerald-600 mb-2">5</div>
        <div className="text-sm font-semibold text-stone-600 uppercase">Inhabergeführte Parfümerien</div>
      </div>
      <div className="bg-white p-5 rounded-xl shadow-sm border border-stone-100 text-center">
        <div className="text-4xl font-bold text-emerald-600 mb-2">10</div>
        <div className="text-sm font-semibold text-stone-600 uppercase">Top-Apotheken (Wien, Graz, Sbg)</div>
      </div>
      <div className="bg-white p-5 rounded-xl shadow-sm border border-stone-100 text-center">
        <div className="text-4xl font-bold text-emerald-600 mb-2">6</div>
        <div className="text-sm font-semibold text-stone-600 uppercase">Monate Laufzeit</div>
      </div>
    </div>

    <div className="bg-white rounded-xl overflow-hidden shadow-md border border-stone-200 flex flex-col md:flex-row">
      <div className="bg-emerald-800 p-6 flex flex-col justify-center text-white md:w-1/3">
        <h3 className="text-xl font-bold mb-2">Parfümerie Jechard</h3>
        <p className="text-emerald-200 text-sm mb-4">Beispiel Voitsberg</p>
        <div className="h-1 w-10 bg-white/30 rounded"></div>
      </div>
      <div className="p-6 md:w-2/3 flex flex-col justify-center">
        <ul className="space-y-3 text-stone-700">
          <li className="flex items-center gap-2"><CheckCircle size={16} className="text-emerald-500"/> Klares Interesse signalisiert</li>
          <li className="flex items-center gap-2"><CheckCircle size={16} className="text-emerald-500"/> Wartet auf Proben & Freigabe</li>
          <li className="flex items-center gap-2"><CheckCircle size={16} className="text-emerald-500"/> Regional positioniert (keine Müller-Konkurrenz)</li>
        </ul>
        <div className="mt-4 text-sm bg-emerald-50 text-emerald-800 p-3 rounded">
          "Ein Partner, der zu uns kommt, nicht einer, den wir überzeugen müssen."
        </div>
      </div>
    </div>
  </div>
);

const ScenarioSlide = () => (
  <div className="w-full">
    <h2 className="text-3xl font-bold text-emerald-900 mb-6">Strategische Frage für Deutschland</h2>
    <p className="text-lg text-stone-600 mb-8">Reichweite oder Exklusivität? Der Pilot liefert Daten.</p>

    <div className="grid grid-cols-1 md:grid-cols-3 gap-4">
      {/* Scenario A */}
      <div className="bg-stone-100 p-6 rounded-xl border border-stone-200 opacity-70">
        <div className="font-bold text-lg text-stone-700 mb-4">Szenario A</div>
        <div className="text-xl font-serif text-emerald-900 mb-4">Status Quo</div>
        <div className="space-y-2 text-sm">
          <p className="text-green-700"><strong>+</strong> Reichweite, bestehende Listung</p>
          <p className="text-red-600"><strong>-</strong> Premium-Partner nicht gewinnbar</p>
        </div>
      </div>

      {/* Scenario B */}
      <div className="bg-white p-6 rounded-xl border-2 border-emerald-500 shadow-xl relative transform scale-105 z-10">
        <div className="absolute top-0 right-0 bg-emerald-500 text-white text-xs font-bold px-2 py-1 rounded-bl">Empfohlen</div>
        <div className="font-bold text-lg text-stone-700 mb-4">Szenario B</div>
        <div className="text-xl font-serif text-emerald-900 mb-4">Exklusiv-Fokus</div>
        <div className="space-y-2 text-sm">
          <p className="text-green-700"><strong>+</strong> Echte Premium-Positionierung</p>
          <p className="text-amber-600"><strong>-</strong> Strategische Entscheidung aus DE nötig</p>
        </div>
      </div>

      {/* Scenario C */}
      <div className="bg-stone-100 p-6 rounded-xl border border-stone-200 opacity-70">
        <div className="font-bold text-lg text-stone-700 mb-4">Szenario C</div>
        <div className="text-xl font-serif text-emerald-900 mb-4">Parallelbetrieb</div>
        <div className="space-y-2 text-sm">
          <p className="text-green-700"><strong>+</strong> Beide Kanäle bedienen</p>
          <p className="text-red-600"><strong>-</strong> Schwierig gegenüber Partnern</p>
        </div>
      </div>
    </div>
  </div>
);

const ConclusionSlide = () => (
  <div className="text-center max-w-3xl mx-auto flex flex-col items-center justify-center h-full space-y-12">
    <h2 className="text-6xl md:text-8xl font-bold text-emerald-900 tracking-tight">
      Nächste Schritte?
    </h2>

    <div className="max-w-xl">
      <p className="italic text-2xl text-stone-500 font-serif">
        "Österreich als Testmarkt: Klein, überschaubar – Learnings für die gesamte DACH-Region."
      </p>
    </div>
  </div>
);

export default PresentationApp;
